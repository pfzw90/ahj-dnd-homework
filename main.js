!function(e){var t={};function n(r){if(t[r])return t[r].exports;var d=t[r]={i:r,l:!1,exports:{}};return e[r].call(d.exports,d,d.exports,n),d.l=!0,d.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var d in e)n.d(r,d,function(t){return e[t]}.bind(null,d));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=0)}([function(e,t,n){"use strict";function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}n.r(t),(new(function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.notes=JSON.parse(window.localStorage.getItem("notes"))||{todo:[],"in-progress":[],done:[]},this.draggedEl=null,this.nearest=null,this.shadowEl=document.createElement("div"),this.shadowEl.id="shadow"}var t,n,d;return t=e,(n=[{key:"drawTask",value:function(e,t,n){var r=this,d=document.createElement("div");d.className="tsk",d.innerHTML="",d.innerText=e,n.insertAdjacentElement(t,d),d.addEventListener("mouseenter",(function(t){if(t.preventDefault(),!r.draggedEl){var n=document.createElement("button");n.innerText="×",n.id="task-remove",n.addEventListener("click",(function(t){t.preventDefault();var n=r.notes[d.parentElement.id];n.splice(n.indexOf(e),1),r.notes[d.parentElement.id]=n,r.refreshStorage(),d.remove()})),d.insertAdjacentElement("beforeend",n)}})),d.addEventListener("mouseleave",(function(){var e=d.querySelector("#task-remove");e&&d.removeChild(e)}))}},{key:"drawAddButton",value:function(e){var t=this,n=document.createElement("button");n.classList.add("add-task"),n.id="".concat(e,"-btn"),n.innerHTML="+ ADD ANOTHER TASK",n.addEventListener("click",(function(r){r.preventDefault();var d=document.createElement("form");d.id="new-task-form";var a=document.createElement("textarea");a.placeholder="Type something...";var o=document.createElement("button");o.innerText="ADD TASK";var l=document.createElement("button");l.innerText="×",l.addEventListener("click",(function(){d.remove(),e.insertAdjacentElement("beforeend",n)})),d.insertAdjacentElement("afterbegin",a),d.insertAdjacentElement("beforeend",o),d.insertAdjacentElement("beforeend",l),d.addEventListener("submit",(function(n){n.preventDefault(),d.remove(),""!==a.value&&(t.notes[e.id].push(a.value),t.drawTask(a.value,"beforeend",e),t.refreshStorage()),t.drawAddButton(e)})),e.insertAdjacentElement("beforeend",d),n.remove()})),e.insertAdjacentElement("beforeend",n)}},{key:"refreshStorage",value:function(){window.localStorage.setItem("notes",JSON.stringify(this.notes))}},{key:"draw",value:function(){var e=this,t=document.createElement("div");t.id="container",["todo","in-progress","done"].forEach((function(n){var r=document.createElement("div");r.className="col",r.id=n;var d=document.createElement("div");d.classList.add("title"),d.innerText=n,r.insertAdjacentElement("afterbegin",d),e.notes&&e.notes[n]&&e.notes[n].forEach((function(t){e.drawTask(t,"beforeend",r)})),e.drawAddButton(r),t.insertAdjacentElement("beforeend",r)})),document.body.insertAdjacentElement("afterbegin",t),document.body.addEventListener("mousedown",(function(t){if(t.target.classList.contains("tsk")){t.target.removeChild(document.getElementById("task-remove")),e.draggedEl=t.target,e.currentParent=e.draggedEl.closest(".col"),e.currentParentId=e.currentParent.id,e.currentPrevious=e.draggedEl.previousSibling,document.body.style.cursor="grabbing",e.elemWidth="".concat(e.draggedEl.offsetWidth,"px"),e.elemHeight="".concat(e.draggedEl.offsetHeight,"px");var n=e.draggedEl.getBoundingClientRect();e.elemLeft=t.clientX-n.x,e.elemTop=t.clientY-n.y,e.shadowEl.style.height="".concat(e.draggedEl.offsetHeight,"px"),e.draggedEl.classList.add("dragged"),e.draggedEl.style.left="".concat(t.clientX-e.elemLeft,"px"),e.draggedEl.style.top="".concat(t.clientY-e.elemTop,"px"),e.draggedEl.style.width=e.elemWidth,e.draggedEl.style.height=e.elemHeight,document.body.appendChild(e.draggedEl)}})),document.body.addEventListener("mousemove",(function(t){t.preventDefault(),e.draggedEl&&(e.nearest=document.elementFromPoint(t.clientX,t.clientY),e.draggedEl.style.left="".concat(t.clientX-e.elemLeft,"px"),e.draggedEl.style.top="".concat(t.clientY-e.elemTop,"px"),"tsk"===e.nearest.className?(e.middle=e.nearest.getBoundingClientRect().y+e.nearest.offsetHeight/2,t.pageY<e.middle?e.nearest.insertAdjacentElement("afterbegin",e.shadowEl):e.nearest.insertAdjacentElement("beforeend",e.shadowEl)):"col"===e.nearest.className&&e.nearest.querySelector(".add-task").insertAdjacentElement("beforebegin",e.shadowEl))})),document.body.addEventListener("mouseup",(function(t){if(t.preventDefault(),e.draggedEl){document.body.removeChild(e.draggedEl),e.nearest=document.elementFromPoint(t.clientX,t.clientY),document.body.style.cursor="default",e.draggedEl.classList.remove("dragged");var n=e.notes[e.currentParentId];n.splice(n.indexOf(e.draggedEl.innerText),1),e.notes[e.currentParentId]=n;var r=e.nearest.closest(".col").id,d=e.notes[r],a=d.indexOf(e.nearest.innerText);if("tsk"===e.nearest.className)e.middle=e.nearest.getBoundingClientRect().y+e.nearest.offsetHeight/2,t.pageY<e.middle?e.position="beforebegin":e.position="afterend",e.nearest.insertAdjacentElement(e.position,e.draggedEl),"beforebegin"===e.position?d.splice(a,0,e.draggedEl.innerText):d.splice(a+1,0,e.draggedEl.innerText),e.notes[r]=d;else{if("col"!==e.nearest.className)return e.currentPrevious.insertAdjacentElement("afterend",e.draggedEl),e.draggedEl.style.removeProperty("top"),e.draggedEl.style.removeProperty("left"),e.shadowEl.remove(),void(e.draggedEl=null);e.nearest.querySelector(".add-task").insertAdjacentElement("beforebegin",e.draggedEl),e.notes[e.nearest.id].push(e.draggedEl.innerText)}e.refreshStorage(),e.draggedEl.style.removeProperty("top"),e.draggedEl.style.removeProperty("left"),e.draggedEl=null,e.position=null,e.shadowEl.remove()}}))}}])&&r(t.prototype,n),d&&r(t,d),e}())).draw()}]);